<!DOCTYPE html>
<html>
<head>
	<!-- include bootstrap, jquery for easy div manipulation -->
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
	<script src="node_modules/socket.io-client/dist/socket.io.min.js"></script>
	<script src="node_modules/socket.io-client/socket.io.js"></script>
	<script>
		//var socket = io.connect('http://192.168.1.155:8587');  //enter the IP of your beaglebone and port you are using in app.js
		var socket = io.connect('http://143.107.235.59:8587');

		socket.on('sensors', function (data) { //append sensors to table
			data.forEach(function (d) {
				var html = '<tr><td>' + d + '</td><td id="' + d + '"></td><td id="hora"></td></tr>';
				$('#temps').append(html);
			});
		});

		//update corresponding row with sensor value
		socket.on('temps', function (data) {
			$('#' + data.id).html(data.value);
			$("#hora").html(data.horas);
		});

	$(document).ready(function(){
		$("#btn").click(function(){
			if(this.checked){
				$("#btnl").html("Ligado").css("color","green");
				socket.emit('pressbt1',{bt1:'on'});//envia botao ligado
			}
			else{	$("#btnl").html("Desligado").css("color","red");
				socket.emit('pressbt1',{bt1:'off'});//envia botao desligado
			}
		});
	});
	</script>
</head>
<body>
<h1>DS18B20 Temps</h1>

<div class="container">
	<table class="table" id="temps">
		<thead>
		<tr>
			<th>Sensor ID</th>
			<th>Temperature (celsius)</th>
			<th>Unix Time</th>
		</tr>
		</thead>
	</table>
</div>
<div>
	<form>
	<input type="checkbox" id="btn"style="margin-left:30px;">
	<label for="btn" id="btnl" style="color:red;">Desligado</label>
	</form>
</div>
</body>
</html>
