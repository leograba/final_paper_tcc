A presente seção discorre acerca do projeto dos circuitos de interface entre a BBB, que representa o núcleo do sistema proposto, e as interações com o sistema mecânico, por meio de sensores e atuadores, dentre outros circuitos auxiliares.

\subsection{Acionamentos de potência}

O circuito de acionamentos de potência foi projetado com o objetivo de controlar os atuadores do sistema: bombas de recirculação de líquido, solenóides das válvulas eletromecânicas, resistores de aquecimento e servo-motor. Com exceção do acionamento do servo-motor, os outros foram projetados de tal maneira que qualquer unidade de acionamento pode ser aplicada a qualquer atuador, já que os requisitos de potência atendem a todas as especificações.

As bombas de recirculação escolhidas para este projeto possuem tensão nominal de 12Vdc e corrente nominal de 1,6A, enquanto as válvulas solenóides da Danfoss consomem 12Vdc e 1,25A e a válvula solenóide genérica é especificada para 12Vdc e 300mA. O relé de estado sólido consome 7,5mA para uma alimentação de 12Vdc. Tendo em vista estes parâmetros, foi projetado o circuito da figura \ref{pot_one_module}, que representa um módulo de acionamento de potência. \textit{v2-ctr} representa o ponto de ligação com a BBB; \textit{GND\_S} é a referência da BBB; e os pinos Vcc e \textit{v2} são a saída do circuito, à qual deve ser ligado o elemento atuador. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.45]{./Resources/proteus/potenciaUmCircuito.png}
	\captionsetup{justification=centering}
	\caption[Módulo do circuito de acionamentos de potência]{Módulo do circuito de acionamentos de potência}
	\label{pot_one_module}
\end{figure}

Note-se que no módulo é empregado um transistor IRF540N do tipo MOSFET, cujas especificações podem ser consultadas no anexo \ref{Anexo6}. A escolha deste transistor foi motivada pelo seu baixo custo e alta disponibilidade, mas devido às suas especificações este não pôde ser acionado diretamente com 3,3V a partir de um pino da BBB, por isto o emprego da fonte de alimentação de +12V. Ainda assim, isto não foi um prejuízo ao projeto, tendo em vista que, para proteger a BBB de transientes que a pudessem danificar, foi empregado um optoacoplador como elemento isolador entre o hardware de controle e o hardware de potência.

O valor do resistor R3 foi escolhido de modo que a corrente máxima no terminal da BBB seja de 1,5mA. O diodo D2 foi colocado em caráter de proteção do circuito, uma vez que o chaveamento de cargas indutivas gera uma tensão reversa que pode danificar os componentes --- com o diodo presente, a corrente reversa tem um caminho de dissipação. O acionamento dos atuadores é realizado em nível alto, já que este faz com que o transistor do optoacoplador conduza, ativando o MOSFET.

\subsection{Acionamentos de potência}

Com relação ao circuito de acionamento do servo-motor, há duas diferenças que devem ser levadas em consideração. Primeiramente, este dispositivo atuador tem faixa de alimentação de 4,8Vdc a 6Vdc, portanto se faz necessário o uso de um regulador de tensão. A segunda diferença é o fato de que há um terminal para controle de posição do dispositivo, fazendo com que este não possa ser ligado em série com o MOSFET. Para adequar a esta situação, foi utilizado um resistor de \textit{pull-down} em série com o MOSFET para compor a saída do circuito. O diagrama esquemático do módulo de acionamento do servo-motor é apresentado na figura \ref{servo_controle}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.55]{./Resources/proteus/servoUmCircuito.png}
	\captionsetup{justification=centering}
	\caption[Módulo do circuito de acionamento do servo-motor]{Módulo do circuito de acionamento do servo-motor}
	\label{servo_controle}
\end{figure}

O diagrama esquemático completo do circuito de acionamentos de potência está disponível no apêndice \ref{esquematico_acionamentos}. Os resultados das simulações e ensaios em bancada são apresentados e discutidos nas seções \ref{aciona_results} e \ref{servo_aciona_results} do capítulo \ref{Resultados}, para o módulo de acionamentos gerais e o módulo de acionamento do PWM, respectivamente.

\subsection{Detector de \textit{zero-crossing}}

O circuito detector de \textit{zero-crossing}, ou seja, detector do momento em que o valor da tensão da senóide da rede passa por zero, foi projetado após a constatação de que a instabilidade da frequência da rede faz com que a fase entre ela e o sinal de PWM usado para o controle dos SSR variem, impossibilitando que seja controlada a quantidade de semi-ciclos que o SSR conduz.

Com este detector, que gera um pulso sempre que a senóide passa por zero, é possível sincronizar a ativação do SSR com o pulso e, portanto, realizar o controle da potência dos resistores de aquecimento do sistema com maior exatidão. Para a detecção, foi projetado um circuito que retifica e atenua a senóide da rede. Este sinal é usado para controlar um transistor que atua como chave: quando a senóide retificada em onda completa e atenuada tem valor menor do que aproximadamente 0,7V, o transistor para de conduzir, gerando então o pulso que indica a passagem por zero. Na figura \ref{zero_sch} é apresentado o diagrama esquemático do circuito.

Os resultados das simulações e ensaios em bancada são apresentados e discutidos na seção \ref{zero_results} do capítulo \ref{Resultados}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.15]{./Resources/proteus/ZeroCrossing.png}
	\captionsetup{justification=centering}
	\caption[Circuito detector de passagem por zero da senóide da rede]{Circuito detector de passagem por zero da senóide da rede}
	\label{zero_sch}
\end{figure}

%\subsection{Detector de nível de líquido}

%\subsection{mais o que?}

